/** @license Copyright (c) Microsoft Corporation. All rights reserved. */
var __extends=this&&this.__extends||function(d,b){for(var p in b)if(b.hasOwnProperty(p))d[p]=b[p];function __(){this.constructor=d}__.prototype=b.prototype;d.prototype=new __},MscrmControls;(function(MscrmControls){var FlipSwitch;(function(FlipSwitch){"use strict";var FlipSwitchControl=function(_super){__extends(FlipSwitchControl,_super);function FlipSwitchControl(){_super.call(this)}FlipSwitchControl.prototype.initCore=function(context){var _this=this;this.flipSwitchDomElement=this.createFlipswitchDomElement();this.flipSwitchDomElement.on(FlipSwitchControl.flipSwitchChangeEventName,function(){_this.notifyEnabledControlOutputChanged.apply(_this)});context.theming.disableUiTransitions();var theme=FlipSwitchControl.buildTheme(context.theming);MscrmCommon.ThemingHelper.injectStyle(this.container,theme);context.theming.inlineLayout(true)};FlipSwitchControl.prototype.updateCore=function(context){this.throwIfPropertyBagParametersNotValid(context);var updateValue=MscrmCommon.ControlUtils.Object.isNullOrUndefined(context.parameters.value.raw)?context.parameters.value.attributes.defaultValue:context.parameters.value.raw;this.setControlValue(updateValue);this.setControlOptions(context.parameters.value.attributes.options)};FlipSwitchControl.prototype.renderReadMode=function(context){_super.prototype.renderReadMode.call(this,context);if(context.mode.isControlDisabled)this.renderDisabled();else{var controlState=context.mode.isPreview?MscrmControls.Common.ControlState.Disabled:MscrmControls.Common.ControlState.Enabled;this.setControlState(controlState,FlipSwitchControl.wrapperClassName,null)}this.refresh()};FlipSwitchControl.prototype.renderEditMode=function(context){this.shouldNotifyOutputChanged=true};FlipSwitchControl.prototype.renderDisabled=function(){this.setControlState(MscrmControls.Common.ControlState.Disabled,FlipSwitchControl.wrapperClassName,FlipSwitchControl.disabledWrapperClassName)};FlipSwitchControl.prototype.getOutputsCore=function(){return {value:this.flipSwitchDomElement.prop(MscrmCommon.AttributeConstants.Checked)}};FlipSwitchControl.prototype.destroyCore=function(){if(this.isControlInitialized){this.flipSwitchDomElement.off(FlipSwitchControl.flipSwitchChangeEventName,null);$(this.container).off(MscrmCommon.EventConstants.TouchMove);this.flipSwitchDomElement.flipswitch(MscrmCommon.MethodConstants.Destroy);this.flipSwitchDomElement.remove();this.flipSwitchDomElement=null;$(this.container).empty()}};FlipSwitchControl.prototype.isControlEnabled=function(context){return !context.mode.isControlDisabled&&!context.mode.isPreview};FlipSwitchControl.prototype.isControlDisabled=function(){return this.flipSwitchDomElement.flipswitch(MscrmCommon.MethodConstants.Option,MscrmCommon.AttributeConstants.Disabled)};FlipSwitchControl.prototype.setControlOptions=function(options){var propertyBag={};propertyBag.onText=options[FlipSwitch.FlipSwitchOptions.On].Label;propertyBag.offText=options[FlipSwitch.FlipSwitchOptions.Off].Label;this.flipSwitchDomElement.flipswitch(propertyBag)};FlipSwitchControl.prototype.setControlValue=function(value){this.flipSwitchDomElement.prop(MscrmCommon.AttributeConstants.Checked,value)};FlipSwitchControl.prototype.setControlState=function(state,wrapperClass,extraWrapperClass){if(this.isControlDisabled()!==state){this.flipSwitchDomElement.flipswitch({disabled:state===MscrmControls.Common.ControlState.Disabled,wrapperClass:wrapperClass});!MscrmCommon.ControlUtils.Object.isNullOrUndefined(extraWrapperClass)&&this.flipSwitchDomElement.parent().addClass(extraWrapperClass)}};FlipSwitchControl.prototype.refresh=function(){this.flipSwitchDomElement.flipswitch(MscrmCommon.MethodConstants.Refresh)};FlipSwitchControl.prototype.createFlipswitchDomElement=function(){var inputHtml="<input type='checkbox' data-role='flipswitch'>",wrapperContainer=this.createWrapperContainer(FlipSwitchControl.containerClassName),flipSwitchInputElement=$(inputHtml).appendTo(wrapperContainer).flipswitch({theme:FlipSwitchControl.jQueryMobileThemeSwatch,wrapperClass:FlipSwitchControl.wrapperClassName});return flipSwitchInputElement};FlipSwitchControl.prototype.throwIfPropertyBagParametersNotValid=function(context){if(MscrmCommon.ControlUtils.Object.isNullOrUndefined(context.parameters.value))throw MscrmCommon.ControlUtils.String.Format(MscrmCommon.CommonControl.InvalidDataBagKeyFormat,"parameters.value");if(MscrmCommon.ControlUtils.Object.isNullOrUndefined(context.parameters.value.attributes))throw MscrmCommon.ControlUtils.String.Format(MscrmCommon.CommonControl.InvalidDataBagKeyFormat,"parameters.value.attributes");if(MscrmCommon.ControlUtils.Object.isNullOrUndefined(context.parameters.value.attributes.defaultValue))throw MscrmCommon.ControlUtils.String.Format(MscrmCommon.CommonControl.InvalidDataBagKeyFormat,"parameters.value.attributes.defaultValue");if(MscrmCommon.ControlUtils.Object.isNullOrUndefined(context.parameters.value.attributes.options)||context.parameters.value.attributes.options.length!==2)throw FlipSwitchControl.InvaldOptionsMessage};FlipSwitchControl.buildTheme=function(theming){return MscrmCommon.ControlUtils.String.Format("\t\t\t\t.ui-bar-c.crm-jqm-flipswitch-wrapper.ui-flipswitch-active {\t\t\t\t\tbackground-color: {0} !important;\t\t\t\t}\t\t\t\t.ui-bar-c.crm-jqm-flipswitch-wrapper .ui-flipswitch-off {\t\t\t\t\tfont-family: {1} !important;\t\t\t\t\tcolor:       {2} !important;\t\t\t\t\tfont-size:   {3} !important;\t\t\t\t}\t\t\t\t.ui-bar-c.crm-jqm-flipswitch-wrapper .ui-btn.ui-flipswitch-on {\t\t\t\t\tfont-family: {1} !important;\t\t\t\t\tcolor:       {2} !important;\t\t\t\t\tfont-size:   {3} !important;\t\t\t\t}",MscrmCommon.ThemingHelper.getProcessNonSelectedColor(theming),MscrmCommon.ThemingHelper.getFontFamily(theming),MscrmCommon.ThemingHelper.getFontColor(theming),MscrmCommon.ThemingHelper.getFontSize(theming))};FlipSwitchControl.InvaldOptionsMessage="Expected two options in the input parameters bag.";FlipSwitchControl.containerClassName="crm-jqm-flipswitch";FlipSwitchControl.wrapperClassName="crm-jqm-flipswitch-wrapper";FlipSwitchControl.disabledWrapperClassName="crm-jqm-flipswitch-wrapper-disabled";FlipSwitchControl.jQueryMobileThemeSwatch="c";FlipSwitchControl.flipSwitchChangeEventName=MscrmCommon.ControlUtils.Event.createName(MscrmCommon.EventConstants.Change,"FlipSwitch");return FlipSwitchControl}(MscrmCommon.FieldControlBase);FlipSwitch.FlipSwitchControl=FlipSwitchControl})(FlipSwitch=MscrmControls.FlipSwitch||(MscrmControls.FlipSwitch={}))})(MscrmControls||(MscrmControls={}));var MscrmControls;(function(MscrmControls){var FlipSwitch;(function(FlipSwitch){"use strict";(function(FlipSwitchOptions){FlipSwitchOptions[FlipSwitchOptions["Off"]=0]="Off";FlipSwitchOptions[FlipSwitchOptions["On"]=1]="On"})(FlipSwitch.FlipSwitchOptions||(FlipSwitch.FlipSwitchOptions={}));var FlipSwitchOptions=FlipSwitch.FlipSwitchOptions})(FlipSwitch=MscrmControls.FlipSwitch||(MscrmControls.FlipSwitch={}))})(MscrmControls||(MscrmControls={}))