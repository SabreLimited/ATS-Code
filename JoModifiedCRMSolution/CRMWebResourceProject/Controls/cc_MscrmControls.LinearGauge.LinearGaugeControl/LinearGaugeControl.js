/** @license Copyright (c) Microsoft Corporation. All rights reserved. */
var __extends=this&&this.__extends||function(d,b){for(var p in b)if(b.hasOwnProperty(p))d[p]=b[p];function __(){this.constructor=d}__.prototype=b.prototype;d.prototype=new __},MscrmControls;(function(MscrmControls){var LinearGauge;(function(LinearGauge_1){"use strict";var LinearGaugeControl=function(_super){__extends(LinearGaugeControl,_super);function LinearGaugeControl(){_super.call(this);this.preventEditModePanoramaEvents=true}LinearGaugeControl.prototype.initCore=function(context){var _this=this;MscrmCommon.ControlUtils.NumericInterval.throwIfNullDataBagParameters(context);MscrmCommon.ControlUtils.NumericInterval.processPropertyBagValues(context,this.notificationHandler);this.linearGaugeControl=this.createControlOnDOM();this.linearGaugeControl.isReadOnly=false;this.linearGaugeControl.valueChanged.addHandler(function(){return _this.notifyEnabledControlOutputChanged.apply(_this)});this.linearGaugeControl.showText=wijmo.gauge.ShowText.None;this.applyCustomStyles(context.theming);this.linearGaugeControl.refresh(true)};LinearGaugeControl.prototype.updateCore=function(context){MscrmCommon.ControlUtils.NumericInterval.throwIfNullDataBagParameters(context);MscrmCommon.ControlUtils.NumericInterval.processPropertyBagValues(context,this.notificationHandler);this.linearGaugeControl.min=context.parameters.min.raw;this.linearGaugeControl.max=context.parameters.max.raw;this.linearGaugeControl.step=context.parameters.step.raw;this.linearGaugeControl.origin=context.parameters.min.raw;this.linearGaugeControl.format=MscrmCommon.ControlUtils.WijmoGlobalization.getFormat(context);this.linearGaugeControl.value=context.parameters.value.raw;var formattedValue=MscrmCommon.ControlUtils.WijmoGlobalization.getFormattedValue(this.linearGaugeControl.value,this.linearGaugeControl.format);MscrmCommon.ControlUtils.NumericInterval.setValueContainer(this.valueContainer,formattedValue)};LinearGaugeControl.prototype.notifyEnabledControlOutputChanged=function(){var formattedValue=MscrmCommon.ControlUtils.WijmoGlobalization.getFormattedValue(this.linearGaugeControl.value,this.linearGaugeControl.format);MscrmCommon.ControlUtils.NumericInterval.setValueContainer(this.valueContainer,formattedValue);_super.prototype.notifyEnabledControlOutputChanged.call(this)};LinearGaugeControl.prototype.showDefaultLabelCore=function(context){return MscrmCommon.ControlUtils.Property.isNullOrEmpty(context.parameters.value)};LinearGaugeControl.prototype.renderReadMode=function(context){_super.prototype.renderReadMode.call(this,context);this.linearGaugeControl.hostElement.classList.add(MscrmCommon.ThemingHelper.ReadModeClassName);this.linearGaugeControl.isReadOnly=context.mode.isRead||context.mode.isPreview;this.linearGaugeControl.disabled=context.mode.isControlDisabled;this.hitTargetExists()&&$(this.container).find(LinearGaugeControl.linearGaugeCssClassSelector).unwrap();this.linearGaugeControl.refresh(true)};LinearGaugeControl.prototype.renderEditMode=function(context){var _this=this;_super.prototype.renderEditMode.call(this,context);this.linearGaugeControl.hostElement.classList.remove(MscrmCommon.ThemingHelper.ReadModeClassName);this.linearGaugeControl.isReadOnly=false;if(this.hitTargetExists()){this.shouldNotifyOutputChanged=true;return}MscrmCommon.ControlUtils.HitTarget.create($(this.container),$(this.container).find(LinearGaugeControl.linearGaugeCssClassSelector),LinearGaugeControl.hitTargetDivClass,LinearGaugeControl.sliderTrackElementClassSelector,LinearGaugeControl.paddingLeftPx,this.linearGaugeControl.min,this.linearGaugeControl.max,function(value){var adjustedValue=MscrmCommon.ControlUtils.NumericInterval.moveValueToMultipleOfStep(value,context);_this.linearGaugeControl.value=adjustedValue});this.linearGaugeControl.refresh(true);this.shouldNotifyOutputChanged=true};LinearGaugeControl.prototype.getOutputsCore=function(){var result={value:this.linearGaugeControl.value};return result};LinearGaugeControl.prototype.destroyCore=function(){if(this.isControlInitialized){this.linearGaugeControl.valueChanged.removeAllHandlers();this.linearGaugeControl.dispose()}this.linearGaugeControl=null;$(this.container).find(LinearGaugeControl.hitTargetDivClassSelector).remove()};LinearGaugeControl.prototype.createControlOnDOM=function(){this.controlWrapperContainer=_super.prototype.createWrapperContainer.call(this);$(this.controlWrapperContainer).addClass(LinearGaugeControl.linearGaugeCssClass);return new wijmo.gauge.LinearGauge(this.controlWrapperContainer)};LinearGaugeControl.prototype.applyCustomStyles=function(theming){this.linearGaugeControl.thumbSize=LinearGaugeControl.linearGaugeThumbSizePx;this.linearGaugeControl.thickness=LinearGaugeControl.linearGaugeThicknessPx/LinearGaugeControl.linearGaugeThumbSizePx;this.linearGaugeControl._pointer.color=MscrmCommon.ThemingHelper.getProcessNonSelectedColor(theming);var circle=$(this.linearGaugeControl.hostElement).find("circle");if(MscrmCommon.ControlUtils.Object.isNullOrUndefined(circle))return;circle.attr({stroke:"white","stroke-width":"1"})};LinearGaugeControl.prototype.hitTargetExists=function(){return MscrmCommon.ControlUtils.HitTarget.exists($(this.container),LinearGaugeControl.hitTargetDivClassSelector)};LinearGaugeControl.linearGaugeCssClass="crm-wijmo-linear-gauge";LinearGaugeControl.linearGaugeCssClassSelector=".crm-wijmo-linear-gauge";LinearGaugeControl.hitTargetDivClass="hittargetlgauge";LinearGaugeControl.hitTargetDivClassSelector=".hittargetlgauge";LinearGaugeControl.sliderTrackElementClassSelector=".wj-gauge .wj-pointer:first";LinearGaugeControl.paddingLeftPx=0;LinearGaugeControl.linearGaugeThumbSizePx=23;LinearGaugeControl.linearGaugeThicknessPx=10;return LinearGaugeControl}(MscrmCommon.FieldControlBase);LinearGauge_1.LinearGaugeControl=LinearGaugeControl})(LinearGauge=MscrmControls.LinearGauge||(MscrmControls.LinearGauge={}))})(MscrmControls||(MscrmControls={}))