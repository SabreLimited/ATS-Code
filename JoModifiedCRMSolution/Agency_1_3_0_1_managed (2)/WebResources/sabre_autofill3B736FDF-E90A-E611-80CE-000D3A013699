function Account_OnChange() {
  if (Xrm.Page.getControl("sabre_account") != null && Xrm.Page.getControl("sabre_account") != undefined) {
	var account = Xrm.Page.getAttribute("sabre_account").getValue();
	var accountId = account[0].id;
	accountId = accountId.slice(1, -1);
	var serverUrl;
	if(Xrm.Page.context.getClientUrl !== undefined){
	  serverUrl = Xrm.Page.context.getClientUrl();  
	}
	else{
	  serverUrl = Xrm.Page.context.getServerUrl();
	}
	var ODataPath = serverUrl + "/XRMServices/2011/OrganizationData.svc"; 
    var contactRequest = new XMLHttpRequest(); 

    contactRequest.open("GET", ODataPath + "/AccountSet(guid'" + accountId + "')", false);
    contactRequest.setRequestHeader("Accept", "application/json"); 
    contactRequest.setRequestHeader("Content-Type", "application/json; charset=utf-8");
	contactRequest.send();
    //If request was successful, parse the email address
    if(contactRequest.status == 200){

	  var retrievedContact = JSON.parse(contactRequest.responseText).d;
      var contactAddress = retrievedContact.address1_composite;
	  alert(retrievedContact[0]);
	  alert(retrievedContact.name);

      if(contactAddress != null){ 
      //set the value of the contacts email to the field 
        Xrm.Page.getAttribute('sabre_address1').setValue(contactAddress); 
      }
      else{
		
        //Default message for when the contact has no email.
        console.log('contact email not set');
        Xrm.Page.getAttribute('sabre_address1').setValue("---No Address on Contact---");

    }

    } 
  else
{
console.log('request failed.');
Xrm.Page.getAttribute('sabre_address1').setValue("---No Contact Found---"); 
}

}
else
{
console.log('no contact on the form.');
Xrm.Page.getAttribute('sabre_address1').setValue(""); 
}

Xrm.Page.getAttribute('sabre_address1').setSubmitMode("always"); 
}